<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Work Engagement (UWES-9) ‚Äî PsycheMetrics</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,500;9..40,700&family=Fraunces:opsz,wght@9..144,400;9..144,700&display=swap" rel="stylesheet">
<script>
tailwind.config = {
  theme: { extend: { fontFamily: { display: ['Fraunces','serif'], body: ['DM Sans','sans-serif'] } } }
}
</script>
<style>
  body { font-family: 'DM Sans', sans-serif; }
  h1,h2,h3 { font-family: 'Fraunces', serif; }
  .fade-in { animation: fadeIn .6s ease-out; }
  .slide-up { animation: slideUp .5s ease-out; }
  @keyframes fadeIn { from{opacity:0} to{opacity:1} }
  @keyframes slideUp { from{opacity:0;transform:translateY(24px)} to{opacity:1;transform:translateY(0)} }
  .option-btn { transition: all .2s ease; }
  .option-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,.08); }
  .option-btn.selected { background: #2563eb; color: white; border-color: #2563eb; }
  .progress-fill { transition: width .4s cubic-bezier(.4,0,.2,1); }
  .trait-bar { transition: width 1.2s cubic-bezier(.4,0,.2,1); }
</style>
</head>
<body class="bg-stone-50 text-gray-800 min-h-screen">

<!-- PsycheMetrics Nav -->
<div class="fixed top-0 left-0 right-0 z-50 bg-white/70 border-b border-stone-200/60" style="backdrop-filter:blur(16px);">
  <div class="max-w-6xl mx-auto px-6 h-12 flex items-center justify-between">
    <a href="index.html" class="flex items-center gap-2 text-sm font-medium text-gray-400 hover:text-gray-900 transition">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M15 19l-7-7 7-7"/></svg>
      Back to PsycheMetrics
    </a>
    <a href="index.html" class="flex items-center gap-2">
      <div class="w-6 h-6 rounded-md bg-gray-900 flex items-center justify-center"><svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg></div>
      <span class="font-bold text-sm text-gray-900" style="font-family:Fraunces,serif">PsycheMetrics</span>
    </a>
  </div>
</div>
<div style="height:48px"></div>

<!-- LANDING -->
<div id="landing" class="min-h-screen flex items-center justify-center px-6 py-12">
  <div class="max-w-2xl w-full fade-in">
    <div class="bg-white shadow-lg rounded-3xl p-10 md:p-14 border border-stone-200/60">
      <div class="flex items-center gap-3 mb-8">
        <div class="w-10 h-10 rounded-xl bg-blue-600 flex items-center justify-center">
          <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
        </div>
        <span class="text-sm font-medium text-blue-600 tracking-wide uppercase">UWES-9 Assessment</span>
      </div>
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-5 leading-tight">Work Engagement Scale</h1>
      <p class="text-gray-500 text-lg leading-relaxed mb-4">
        Measure your work engagement across three dimensions ‚Äî Vigor, Dedication, and Absorption. This reflects a positive, fulfilling, work-related state of mind.
      </p>
      <p class="text-gray-400 text-sm mb-8">
        9 questions ¬∑ ~2 minutes ¬∑ Utrecht Work Engagement Scale (UWES-9) by Schaufeli, Bakker & Salanova (2006). Validated internationally.
      </p>
      <button onclick="startQuiz()" class="bg-blue-600 text-white px-8 py-4 rounded-2xl hover:bg-blue-700 transition font-medium text-lg shadow-lg shadow-blue-200">
        Begin Assessment ‚Üí
      </button>
    </div>
    <p class="text-center text-xs text-gray-400 mt-6">For academic/non-commercial use. Not a clinical diagnostic tool.</p>
  </div>
</div>

<!-- QUIZ -->
<div id="quiz" class="hidden min-h-screen flex items-center justify-center px-6 py-12">
  <div class="max-w-xl w-full fade-in">
    <div class="bg-white shadow-lg rounded-3xl p-8 md:p-10 border border-stone-200/60">
      <div class="flex items-center justify-between mb-2">
        <span id="progressLabel" class="text-xs font-medium text-gray-400">1 of 9</span>
        <span id="progressPercent" class="text-xs font-medium text-blue-600">11%</span>
      </div>
      <div class="w-full bg-gray-100 rounded-full h-2 mb-8">
        <div id="progressBar" class="progress-fill bg-blue-600 h-2 rounded-full" style="width:11%"></div>
      </div>
      <p id="subscaleLabel" class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-3"></p>
      <h2 id="questionText" class="text-xl md:text-2xl font-bold text-gray-900 mb-8 leading-snug"></h2>
      <div id="options" class="grid gap-2"></div>
      <div class="flex justify-between mt-8">
        <button onclick="prevQuestion()" id="prevBtn" class="text-gray-400 hover:text-gray-700 px-4 py-2 rounded-xl transition text-sm font-medium">‚Üê Back</button>
        <button onclick="nextQuestion()" id="nextBtn" class="bg-blue-600 text-white px-6 py-2.5 rounded-xl hover:bg-blue-700 transition text-sm font-medium shadow-md">Next ‚Üí</button>
      </div>
    </div>
  </div>
</div>

<!-- RESULTS -->
<div id="results" class="hidden min-h-screen px-6 py-12">
  <div class="max-w-3xl mx-auto space-y-6">
    <div class="text-center mb-4 slide-up">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Your Engagement Profile</h2>
      <p class="text-gray-400 mb-4">Based on the Utrecht Work Engagement Scale (UWES-9)</p>
      <div class="no-export flex flex-wrap justify-center items-center gap-3">
        <button onclick="window.print()" class="px-4 py-2 rounded-xl border border-stone-200 text-sm text-gray-700 hover:text-gray-900 hover:border-gray-400 transition">Print / Save PDF</button>
        <button id="copySummaryBtn" onclick="copySummary()" class="px-4 py-2 rounded-xl border border-stone-200 text-sm text-gray-700 hover:text-gray-900 hover:border-gray-400 transition">Copy Summary</button>
      </div>
    </div>

    <!-- Overall Score -->
    <div id="scoreSection" class="bg-white shadow-lg rounded-3xl p-8 border border-stone-200/60 slide-up"></div>

    <!-- Dimension Bars -->
    <div id="dimensionBars" class="bg-white shadow-lg rounded-3xl p-8 border border-stone-200/60 slide-up"></div>

    <!-- Radar -->
    <div class="bg-white shadow-lg rounded-3xl p-8 border border-stone-200/60 slide-up">
      <h3 class="text-lg font-bold mb-4 text-gray-700">Engagement Dimensions</h3>
      <div class="max-w-sm mx-auto"><canvas id="radarChart"></canvas></div>
    </div>

    <!-- Interpretation -->
    <div id="interpretation" class="bg-white shadow-lg rounded-3xl p-8 border border-stone-200/60 slide-up"></div>

    <!-- HR Insights -->
    <div id="hrInsights" class="bg-white shadow-lg rounded-3xl p-8 border border-stone-200/60 slide-up"></div>

    <p class="text-center text-xs text-gray-400 pb-8">Reference: Schaufeli, W.B., Bakker, A.B. & Salanova, M. (2006). Educational and Psychological Measurement, 66, 701-716.</p>
  </div>
</div>

<script>
/* ===================== UWES-9 DATA ===================== */
/*
  7-point frequency scale: 0=Never to 6=Always
  Vigor: items 1, 2, 5
  Dedication: items 3, 4, 7
  Absorption: items 6, 8, 9
  No reverse scoring. Score = mean per subscale and overall.
*/

const questions = [
  { text: "At my work, I feel bursting with energy.", dimension: "Vigor" },
  { text: "At my job, I feel strong and vigorous.", dimension: "Vigor" },
  { text: "I am enthusiastic about my job.", dimension: "Dedication" },
  { text: "My job inspires me.", dimension: "Dedication" },
  { text: "When I get up in the morning, I feel like going to work.", dimension: "Vigor" },
  { text: "I feel happy when I am working intensely.", dimension: "Absorption" },
  { text: "I am proud of the work that I do.", dimension: "Dedication" },
  { text: "I am immersed in my work.", dimension: "Absorption" },
  { text: "I get carried away when I am working.", dimension: "Absorption" }
];

const likertLabels = [
  { value: 0, label: "Never", desc: "" },
  { value: 1, label: "Almost Never", desc: "A few times a year or less" },
  { value: 2, label: "Rarely", desc: "Once a month or less" },
  { value: 3, label: "Sometimes", desc: "A few times a month" },
  { value: 4, label: "Often", desc: "Once a week" },
  { value: 5, label: "Very Often", desc: "A few times a week" },
  { value: 6, label: "Always", desc: "Every day" }
];

const dimMeta = {
  Vigor:      { color: "#2563eb", bg: "bg-blue-50",   text: "text-blue-700",   border: "border-blue-200",   barBg: "bg-blue-500", icon: "‚ö°" },
  Dedication: { color: "#7c3aed", bg: "bg-violet-50", text: "text-violet-700", border: "border-violet-200", barBg: "bg-violet-500", icon: "üéØ" },
  Absorption: { color: "#059669", bg: "bg-emerald-50",text: "text-emerald-700",border: "border-emerald-200",barBg: "bg-emerald-500", icon: "üî¨" }
};

let current = 0;
let answers = new Array(9).fill(null);
let latestResults = null;
let radarChartInstance = null;

/* ===================== QUIZ LOGIC ===================== */
function startQuiz() {
  document.getElementById("landing").classList.add("hidden");
  document.getElementById("quiz").classList.remove("hidden");
  renderQuestion();
}

function renderQuestion() {
  const q = questions[current];
  document.getElementById("questionText").innerText = `"${q.text}"`;
  const meta = dimMeta[q.dimension];
  document.getElementById("subscaleLabel").innerText = q.dimension;
  const pct = Math.round(((current+1)/9)*100);
  document.getElementById("progressLabel").innerText = `${current+1} of 9`;
  document.getElementById("progressPercent").innerText = `${pct}%`;
  document.getElementById("progressBar").style.width = pct+"%";
  document.getElementById("prevBtn").style.visibility = current===0?"hidden":"visible";
  document.getElementById("nextBtn").innerText = current===8?"Calculate Results":"Next ‚Üí";

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";
  likertLabels.forEach(opt => {
    const selected = answers[current]===opt.value;
    const btn = document.createElement("button");
    btn.className = `option-btn w-full text-left px-5 py-3 rounded-2xl border-2 font-medium text-sm ${
      selected ? "selected" : "border-gray-200 bg-white text-gray-700 hover:border-blue-300"
    }`;
    const descSpan = opt.desc ? `<span class="text-xs ${selected?'text-blue-100':'text-gray-400'} ml-2">${opt.desc}</span>` : '';
    btn.innerHTML = `<span class="inline-flex items-center gap-3">
      <span class="w-6 h-6 rounded-full border-2 ${selected?"border-white bg-white/20":"border-gray-300"} flex items-center justify-center text-xs font-bold">${selected?"‚úì":opt.value}</span>
      ${opt.label}${descSpan}
    </span>`;
    btn.onclick = () => { answers[current]=opt.value; renderQuestion(); };
    optionsDiv.appendChild(btn);
  });
}

function nextQuestion() {
  if(answers[current]===null) return;
  if(current<8) { current++; renderQuestion(); } else { calculateResults(); }
}
function prevQuestion() { if(current>0) { current--; renderQuestion(); } }

/* ===================== SCORING ===================== */
function calculateResults() {
  document.getElementById("quiz").classList.add("hidden");
  document.getElementById("results").classList.remove("hidden");
  window.scrollTo({top:0,behavior:"smooth"});

  // Vigor: items 0,1,4
  const vigor = (answers[0]+answers[1]+answers[4]) / 3;
  // Dedication: items 2,3,6
  const dedication = (answers[2]+answers[3]+answers[6]) / 3;
  // Absorption: items 5,7,8
  const absorption = (answers[5]+answers[7]+answers[8]) / 3;
  // Overall
  const overall = answers.reduce((s,v)=>s+v,0) / 9;

  latestResults = { overall, vigor, dedication, absorption };
  renderScore(overall, vigor, dedication, absorption);
  renderDimensionBars(vigor, dedication, absorption);
  renderRadar(vigor, dedication, absorption);
  renderInterpretation(overall, vigor, dedication, absorption);
  renderHRInsights(overall, vigor, dedication, absorption);
}

/* ===================== ENGAGEMENT LEVEL ===================== */
function engagementLevel(score) {
  if(score >= 5) return { label: "Very High", color: "text-emerald-600", bg: "bg-emerald-50" };
  if(score >= 4) return { label: "High", color: "text-blue-600", bg: "bg-blue-50" };
  if(score >= 3) return { label: "Moderate", color: "text-amber-600", bg: "bg-amber-50" };
  if(score >= 2) return { label: "Low", color: "text-orange-600", bg: "bg-orange-50" };
  return { label: "Very Low", color: "text-red-500", bg: "bg-red-50" };
}

/* ===================== SCORE DISPLAY ===================== */
function renderScore(overall, vigor, dedication, absorption) {
  const lvl = engagementLevel(overall);

  document.getElementById("scoreSection").innerHTML = `
    <div class="text-center">
      <div class="text-6xl font-bold text-gray-900 mb-2">${overall.toFixed(2)}</div>
      <div class="text-sm text-gray-400 mb-4">out of 6.00 ‚Äî Overall Work Engagement</div>
      <span class="inline-block px-4 py-1.5 rounded-full ${lvl.bg} ${lvl.color} font-semibold text-sm">${lvl.label} Engagement</span>
      <div class="mt-6 grid grid-cols-3 gap-4 max-w-lg mx-auto">
        <div class="p-3 rounded-xl ${dimMeta.Vigor.bg} border ${dimMeta.Vigor.border}">
          <div class="text-2xl font-bold ${dimMeta.Vigor.text}">${vigor.toFixed(1)}</div>
          <div class="text-xs ${dimMeta.Vigor.text}">Vigor</div>
        </div>
        <div class="p-3 rounded-xl ${dimMeta.Dedication.bg} border ${dimMeta.Dedication.border}">
          <div class="text-2xl font-bold ${dimMeta.Dedication.text}">${dedication.toFixed(1)}</div>
          <div class="text-xs ${dimMeta.Dedication.text}">Dedication</div>
        </div>
        <div class="p-3 rounded-xl ${dimMeta.Absorption.bg} border ${dimMeta.Absorption.border}">
          <div class="text-2xl font-bold ${dimMeta.Absorption.text}">${absorption.toFixed(1)}</div>
          <div class="text-xs ${dimMeta.Absorption.text}">Absorption</div>
        </div>
      </div>
    </div>
  `;
}

/* ===================== DIMENSION BARS ===================== */
function renderDimensionBars(vigor, dedication, absorption) {
  const dims = [
    { name: "Vigor", score: vigor, meta: dimMeta.Vigor, desc: "Energy, resilience, and willingness to invest effort at work" },
    { name: "Dedication", score: dedication, meta: dimMeta.Dedication, desc: "Sense of significance, enthusiasm, inspiration, pride, and challenge" },
    { name: "Absorption", score: absorption, meta: dimMeta.Absorption, desc: "Full concentration and deep engrossment in one's work" }
  ];

  let html = `<h3 class="text-lg font-bold mb-6 text-gray-700">Dimension Scores</h3>`;
  dims.forEach(d => {
    const pct = (d.score/6)*100;
    const lvl = engagementLevel(d.score);
    html += `
      <div class="mb-5">
        <div class="flex justify-between mb-1">
          <span class="text-sm font-semibold ${d.meta.text}">${d.meta.icon} ${d.name}</span>
          <span class="text-sm font-bold">${d.score.toFixed(2)}/6 <span class="font-normal text-gray-400">(${lvl.label})</span></span>
        </div>
        <p class="text-xs text-gray-400 mb-2">${d.desc}</p>
        <div class="w-full bg-gray-100 rounded-full h-4 overflow-hidden">
          <div class="${d.meta.barBg} h-4 rounded-full trait-bar" style="width:0%" data-target="${pct}"></div>
        </div>
      </div>`;
  });
  document.getElementById("dimensionBars").innerHTML = html;
  requestAnimationFrame(() => {
    setTimeout(() => {
      document.querySelectorAll("#dimensionBars .trait-bar").forEach(bar => { bar.style.width = bar.dataset.target+"%"; });
    }, 200);
  });
}

/* ===================== RADAR ===================== */
function renderRadar(vigor, dedication, absorption) {
  if(radarChartInstance) radarChartInstance.destroy();
  radarChartInstance = new Chart(document.getElementById("radarChart"), {
    type: 'radar',
    data: {
      labels: ["Vigor", "Dedication", "Absorption"],
      datasets: [{
        label: "Score", data: [vigor, dedication, absorption],
        backgroundColor: "rgba(37,99,235,0.12)",
        borderColor: "rgba(37,99,235,0.8)", borderWidth: 2.5,
        pointBackgroundColor: [dimMeta.Vigor.color, dimMeta.Dedication.color, dimMeta.Absorption.color],
        pointBorderColor: "#fff", pointBorderWidth: 2, pointRadius: 7, fill: true
      }]
    },
    options: {
      responsive: true, animation: {duration:1200},
      scales: { r: { beginAtZero: true, max: 6, ticks: {stepSize:1}, pointLabels: {font:{size:13,weight:'bold'}} } },
      plugins: { legend: {display:false} }
    }
  });
}

/* ===================== INTERPRETATION ===================== */
function renderInterpretation(overall, vigor, dedication, absorption) {
  const descs = {
    Vigor: {
      high: "You feel energized and mentally resilient at work. You're willing to invest effort and persist through difficulties.",
      mod: "You have a reasonable energy level at work, though you may experience dips in motivation during challenging periods.",
      low: "You may feel drained or lack energy at work. This could signal a need for workload adjustment, recovery time, or role reassessment."
    },
    Dedication: {
      high: "You find your work meaningful, inspiring, and challenging in a positive way. You feel a strong sense of purpose and pride.",
      mod: "You find some meaning in your work but may not always feel fully inspired. Consider whether your role aligns with your values.",
      low: "You may feel disconnected from the purpose of your work. This dimension is closely linked to job-person fit and organizational values."
    },
    Absorption: {
      high: "You become deeply immersed in your work and experience flow states regularly. Time passes quickly when you're working.",
      mod: "You can focus well at times but aren't consistently deeply absorbed. External distractions or role mismatch may be factors.",
      low: "You rarely feel deeply immersed in your work. This could reflect task-skill mismatch, excessive interruptions, or low interest in current tasks."
    }
  };

  function getLevel(score) { return score>=4?"high":score>=2.5?"mod":"low"; }

  let html = `<h3 class="text-lg font-bold mb-4 text-gray-700">Interpretation</h3>`;
  [["Vigor",vigor],["Dedication",dedication],["Absorption",absorption]].forEach(([name,score]) => {
    const meta = dimMeta[name];
    const lvl = getLevel(score);
    html += `
      <div class="mb-4 p-4 rounded-2xl ${meta.bg} border ${meta.border}">
        <p class="font-semibold ${meta.text} mb-2">${meta.icon} ${name}: ${score.toFixed(2)}/6 (${engagementLevel(score).label})</p>
        <p class="text-sm text-gray-600">${descs[name][lvl]}</p>
      </div>`;
  });

  document.getElementById("interpretation").innerHTML = html;
}

/* ===================== HR INSIGHTS ===================== */
function renderHRInsights(overall, vigor, dedication, absorption) {
  const insights = [];

  if(overall >= 4) {
    insights.push({title:"Retention Asset",desc:"Highly engaged employees are significantly less likely to leave and report higher job satisfaction."});
    insights.push({title:"Performance Link",desc:"Work engagement is positively correlated with in-role performance, extra-role behavior, and client satisfaction."});
  } else if(overall >= 2.5) {
    insights.push({title:"Development Opportunity",desc:"Moderate engagement can often be increased through job crafting, autonomy, and skill development opportunities."});
  } else {
    insights.push({title:"Burnout Risk",desc:"Very low engagement may signal approaching burnout. The Job Demands-Resources model suggests increasing resources (autonomy, feedback, social support)."});
  }

  if(vigor < 3) insights.push({title:"Energy Management",desc:"Low vigor may indicate workload issues, insufficient recovery, or a mismatch between demands and resources."});
  if(dedication < 3) insights.push({title:"Meaning & Purpose",desc:"Low dedication suggests a disconnect. Consider role redesign, values alignment conversations, or job enrichment."});
  if(absorption < 3) insights.push({title:"Flow Enablement",desc:"Low absorption may reflect excessive interruptions, unclear goals, or tasks below/above skill level."});

  insights.push({title:"Engagement ‚â† Satisfaction",desc:"Engagement reflects energy and involvement, not just contentment. An engaged employee is actively invested, not merely happy."});

  document.getElementById("hrInsights").innerHTML = `
    <h3 class="text-lg font-bold mb-4 text-gray-700">HR & Organizational Implications</h3>
    <div class="grid gap-3">
      ${insights.map(i => `<div class="p-3 rounded-xl bg-gray-50 border border-gray-200">
        <p class="font-semibold text-gray-700 text-sm">${i.title}</p>
        <p class="text-xs text-gray-500 mt-1">${i.desc}</p>
      </div>`).join("")}
    </div>
    <p class="text-xs text-gray-400 mt-4">Based on the Job Demands-Resources (JD-R) model (Bakker & Demerouti, 2007). Engagement is best fostered by increasing job resources and personal resources.</p>
  `;
}

function copySummary() {
  if(!latestResults) return;
  const summary = `Overall engagement: ${latestResults.overall.toFixed(2)}/6\nVigor: ${latestResults.vigor.toFixed(2)}\nDedication: ${latestResults.dedication.toFixed(2)}\nAbsorption: ${latestResults.absorption.toFixed(2)}`;
  navigator.clipboard.writeText(`PsycheMetrics UWES-9 Summary\n${summary}`).then(() => {
    const btn = document.getElementById('copySummaryBtn');
    if(!btn) return;
    const orig = btn.textContent;
    btn.textContent='Copied';
    setTimeout(()=>btn.textContent=orig,1200);
  });
}


</script>
</body>
</html>
